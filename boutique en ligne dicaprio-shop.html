<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DiCaprio-Shop - Acheter ou vendre devient facile</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #fefae0; color: #333; line-height: 1.6; }
        
        /* HEADER */
        header { background-color: white; padding: 15px 40px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; }
        .header-container { max-width: 1400px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; gap: 20px; flex-wrap: wrap; }
        .logo-section { display: flex; align-items: center; gap: 12px; cursor: pointer; }
        .logo-icon { width: 45px; height: 45px; background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; }
        .logo-text h1 { font-size: 22px; color: #1b5e20; margin: 0; }
        .logo-text p { font-size: 12px; color: #666; margin: 0; font-weight: bold; }

        /* NAVIGATION */
        .nav-buttons { display: none; gap: 10px; align-items: center; }
        .logged-in .nav-buttons { display: flex; }
        
        button { padding: 10px 18px; border: 1px solid #ddd; background-color: white; border-radius: 8px; cursor: pointer; transition: 0.3s; font-weight: 600; font-size: 14px; }
        button.primary { background-color: #1b5e20; color: white; border-color: #1b5e20; }
        button.secondary { background-color: #f4a261; color: white; border-color: #f4a261; }
        button.danger { color: #c0392b; border-color: #c0392b; }
        button.success { background-color: #2ecc71; color: white; border-color: #2ecc71; }
        button:hover { opacity: 0.9; transform: translateY(-1px); }

        /* RECHERCHE */
        .search-container { flex: 1; min-width: 300px; display: none; gap: 8px; }
        .logged-in .search-container { display: flex; }
        .search-input, .cat-select { padding: 10px; border: 1px solid #ddd; border-radius: 8px; outline: none; }
        .search-input { flex: 2; }

        /* MAIN */
        main { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
        .section-title { font-size: 32px; color: #1b5e20; margin-bottom: 30px; text-align: center; border-bottom: 3px solid #f4a261; display: inline-block; padding-bottom: 5px; }
        .center-title { text-align: center; margin-bottom: 40px; }

        /* GRILLE PRODUITS */
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; }
        .product-card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.08); position: relative; transition: 0.3s; }
        .product-card:hover { transform: translateY(-5px); }
        .cat-badge { position: absolute; top: 12px; left: 12px; background: rgba(27, 94, 32, 0.85); color: white; padding: 5px 10px; border-radius: 6px; font-size: 11px; font-weight: bold; z-index: 10; }
        .sold-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.8); display: flex; justify-content: center; align-items: center; z-index: 20; font-weight: 800; color: #c0392b; font-size: 28px; transform: rotate(-15deg); border: 4px solid #c0392b; pointer-events: none; }
        .product-image { height: 220px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; }
        .product-image img { width: 100%; height: 100%; object-fit: cover; }
        .product-info { padding: 20px; }
        .product-name { font-size: 18px; font-weight: bold; margin-bottom: 10px; color: #2d3436; }
        .product-price { font-size: 20px; font-weight: 800; color: #1b5e20; margin-bottom: 15px; }
        .product-actions { display: flex; flex-direction: column; gap: 10px; }

        /* SECTION A PROPOS (Design Eddine) */
        .about-card { background: white; border-radius: 20px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); margin-bottom: 40px; }
        .founder-box { display: flex; align-items: center; gap: 30px; background: #f8f9fa; padding: 25px; border-radius: 15px; margin: 25px 0; border-left: 5px solid #1b5e20; }
        .founder-info h3 { color: #1b5e20; font-size: 24px; margin-bottom: 5px; }
        .mission-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px; }
        .mission-item { background: #fff; border: 1px solid #eee; padding: 20px; border-radius: 12px; text-align: center; }
        .mission-item span { font-size: 40px; display: block; margin-bottom: 10px; }
        .history-box { line-height: 1.8; color: #555; margin-top: 30px; }
        .values-list { display: flex; flex-wrap: wrap; gap: 15px; margin-top: 20px; }
        .value-tag { background: #e8f5e9; color: #1b5e20; padding: 8px 15px; border-radius: 50px; font-weight: bold; font-size: 14px; }

        /* MODALS & PAGES */
        .page-section { display: none; animation: fadeIn 0.4s ease; }
        .page-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center; padding: 20px; }
        .modal-content { background: white; padding: 30px; border-radius: 15px; width: 100%; max-width: 450px; position: relative; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 14px; }
        .form-group input, .form-group select { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; }
        .toast { position: fixed; bottom: 30px; right: 30px; background: #333; color: white; padding: 15px 30px; border-radius: 10px; z-index: 2000; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
    </style>
</head>
<body id="appBody">

    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <h3>üí≥ Paiement S√©curis√©</h3>
            <p id="paymentDetails" style="margin: 15px 0; font-weight: bold; color: #1b5e20;"></p>
            <div class="form-group">
                <label>Choisir un mode de paiement</label>
                <select id="payMode">
                    <option>Mvola</option>
                    <option>Orange Money</option>
                    <option>PayPal</option>
                    <option>Carte Bancaire</option>
                </select>
            </div>
            <div class="form-group">
                <label>Num√©ro ou Email</label>
                <input type="text" id="payInfo" placeholder="Votre identifiant de paiement">
            </div>
            <button class="primary" style="width:100%" onclick="confirmPayment()">Confirmer l'achat</button>
            <button onclick="closeModal('paymentModal')" style="width:100%; margin-top:10px; border:none; background:none; color:#999;">Annuler</button>
        </div>
    </div>

    <div id="editModal" class="modal">
        <div class="modal-content">
            <h3>‚úèÔ∏è Modifier votre produit</h3>
            <input type="hidden" id="editId">
            <div class="form-group"><label>Nom</label><input type="text" id="editName"></div>
            <div class="form-group"><label>Prix (‚Ç¨)</label><input type="number" id="editPrice"></div>
            <button class="success" style="width:100%" onclick="saveEdit()">Enregistrer les changements</button>
            <button onclick="closeModal('editModal')" style="width:100%; margin-top:10px; border:none; background:none; color:#999;">Fermer</button>
        </div>
    </div>

    <header>
        <div class="header-container">
            <div class="logo-section" onclick="showPage('home')">
                <div class="logo-icon">üõçÔ∏è</div>
                <div class="logo-text">
                    <h1>DiCaprio-Shop</h1>
                    <p>Acheter ou vendre devient facile</p>
                </div>
            </div>
            
            <div class="search-container">
                <input type="text" class="search-input" id="searchInput" placeholder="Que recherchez-vous ?" onkeyup="renderProducts()">
                <select id="filterCategory" class="cat-select" onchange="renderProducts()">
                    <option value="">Tous</option>
                    <option value="vetement">V√™tements</option>
                    <option value="mobile">Mobiles</option>
                    <option value="electronique">√âlectronique</option>
                    <option value="beaute">Beaut√©</option>
                    <option value="autre">Autre</option>
                </select>
            </div>

            <div class="nav-buttons">
                <button onclick="showPage('home')">üè† Accueil</button>
                <button onclick="showPage('about')">‚ÑπÔ∏è √Ä Propos</button>
                <button onclick="showPage('publish')" class="secondary">‚ûï Publier</button>
                <button onclick="showPage('myProducts')">‚úÖ Mes annonces</button>
                <span id="userStatus" style="font-weight: bold; color: #1b5e20; margin: 0 10px;"></span>
                <button onclick="logout()" class="danger">Sortir</button>
            </div>
        </div>
    </header>

    <main>
        <div class="page-section active" id="loginPage">
            <div style="background: white; padding: 40px; border-radius: 20px; max-width: 450px; margin: 50px auto; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.1);">
                <h2 class="section-title">Connexion</h2>
                <p style="margin-bottom: 25px; color: #666;">Bienvenue sur DiCaprio-Shop. Connectez-vous pour commencer.</p>
                <div class="form-group"><input type="text" id="authEmail" placeholder="Email (admin@shop.com)"></div>
                <div class="form-group"><input type="password" id="authPassword" placeholder="Mot de passe (Password123!)"></div>
                <button class="primary" style="width:100%; padding: 15px;" onclick="handleAuth()">Acc√©der √† la plateforme</button>
                <p style="margin-top:20px; font-size:13px; color:#1b5e20; font-weight:bold;">¬´ Venez vendre vos produits chez DiCaprio-Shop ¬ª</p>
            </div>
        </div>

        <div class="page-section" id="homePage">
            <div class="center-title">
                <h2 class="section-title">Produits Disponibles</h2>
            </div>
            <div class="products-grid" id="productsGrid"></div>
        </div>

        <div class="page-section" id="aboutPage">
            <div class="about-card">
                <h2 class="section-title">√Ä propos de DiCaprio-Shop</h2>
                <p style="font-style: italic; color: #1b5e20; font-weight: bold; font-size: 1.2em; text-align: center; margin: 20px 0;">
                    "Acheter ou vendre devient facile"
                </p>

                <div class="founder-box">
                    <div style="font-size: 50px;">üë®‚Äçüíª</div>
                    <div class="founder-info">
                        <h3>Eddine Abdillah Abdallah</h3>
                        <p><strong>Fondateur - Depuis 2026</strong></p>
                        <p>Passionn√© par le commerce local et l'innovation technologique, Eddine a cr√©√© DiCaprio-Shop avec une vision claire : rendre l'achat et la vente de produits locaux simple, accessible et agr√©able pour tous.</p>
                    </div>
                </div>

                <h3 style="color: #1b5e20; margin-top: 30px;">üéØ Notre Mission</h3>
                <div class="mission-grid">
                    <div class="mission-item"><span>üõí</span><h4>Simplicit√©</h4><p>Rendre l'achat et la vente aussi simples que possible pour tous.</p></div>
                    <div class="mission-item"><span>ü§ù</span><h4>Communaut√©</h4><p>Cr√©er des liens entre acheteurs et vendeurs locaux.</p></div>
                    <div class="mission-item"><span>üí∞</span><h4>√âquit√©</h4><p>Offrir des opportunit√©s √©gales aux particuliers et professionnels.</p></div>
                </div>

                <div class="history-box">
                    <h3 style="color: #1b5e20; margin-bottom: 15px;">üìú Notre Histoire</h3>
                    <p><strong>10 d√©cembre 2025</strong> - Le jour o√π tout a commenc√©. DiCaprio-Shop est n√© d'une id√©e puissante : cr√©er un march√© local fluide et sans friction.</p>
                    <p>Le nom <strong>"DiCaprio-Shop"</strong> refl√®te notre engagement envers l'accessibilit√©. Aujourd'hui, nous offrons une plateforme compl√®te avec paiement s√©curis√© (Stripe), messagerie interne et outils de recherche avanc√©s.</p>
                </div>

                <h3 style="color: #1b5e20; margin-top: 30px;">üíé Nos Valeurs</h3>
                <div class="values-list">
                    <div class="value-tag">‚ú® Transparence</div>
                    <div class="value-tag">üîí S√©curit√©</div>
                    <div class="value-tag">üå± Innovation</div>
                    <div class="value-tag">‚ù§Ô∏è Engagement Local</div>
                </div>

                <div style="text-align: center; margin-top: 40px; padding: 20px; background: #1b5e20; color: white; border-radius: 15px;">
                    <h3>Rejoignez la communaut√© !</h3>
                    <p>Que vous soyez acheteur ou vendeur, DiCaprio-Shop est fait pour vous.</p>
                    <button class="secondary" style="margin-top:15px" onclick="showPage('home')">D√©couvrir les produits</button>
                    <p style="margin-top:15px; font-weight: bold;">¬´ Venez vendre vos produits chez DiCaprio-Shop ¬ª</p>
                </div>
            </div>
        </div>

        <div class="page-section" id="publishPage">
            <h2 class="section-title">Vendre un article</h2>
            <div style="background: white; padding: 30px; border-radius: 20px; max-width: 600px; margin: 0 auto; box-shadow: 0 5px 20px rgba(0,0,0,0.05);">
                <div class="form-group"><label>Nom du produit</label><input type="text" id="productName" placeholder="Ex: iPhone 15 Pro"></div>
                <div class="form-group">
                    <label>Cat√©gorie</label>
                    <select id="productCategory">
                        <option value="vetement">üëï V√™tement</option>
                        <option value="mobile">üì± Mobile</option>
                        <option value="electronique">üíª √âlectronique</option>
                        <option value="beaute">üíÑ Beaut√©</option>
                        <option value="autre">üì¶ Autre</option>
                    </select>
                </div>
                <div class="form-group"><label>Prix (‚Ç¨)</label><input type="number" id="productPrice" placeholder="0.00"></div>
                <div class="form-group"><label>Photo du produit</label><input type="file" accept="image/*" onchange="handlePreview(event)"></div>
                <div class="form-group"><label>Votre WhatsApp</label><input type="tel" id="productPhone" placeholder="+261 ..."></div>
                <button class="primary" style="width:100%; padding: 15px;" onclick="publishProduct()">Mettre en vente maintenant</button>
            </div>
        </div>

        <div class="page-section" id="myProductsPage">
            <h2 class="section-title">Mes annonces & Gestion</h2>
            <div id="myProductsList" class="products-grid"></div>
        </div>
    </main>

    <script>
        let products = JSON.parse(localStorage.getItem('products')) || [];
        let users = JSON.parse(localStorage.getItem('users')) || [{email: 'admin@shop.com', password: 'Password123!', name: 'Admin'}];
        let currentUser = null;
        let tempImageBase64 = null;

        // AUTH
        function handleAuth() {
            const email = document.getElementById('authEmail').value;
            const pass = document.getElementById('authPassword').value;
            const user = users.find(u => u.email === email && u.password === pass);
            if (user) { 
                currentUser = user; 
                document.getElementById('appBody').classList.add('logged-in'); 
                document.getElementById('userStatus').innerText = "üë§ " + user.name;
                showPage('home'); 
                showToast("Bienvenue " + user.name);
            } else alert("Identifiants incorrects.");
        }

        function logout() { currentUser = null; document.getElementById('appBody').classList.remove('logged-in'); showPage('login'); }

        function showPage(page) {
            if (!currentUser && page !== 'login') page = 'login';
            document.querySelectorAll('.page-section').forEach(el => el.classList.remove('active'));
            document.getElementById(page + 'Page').classList.add('active');
            window.scrollTo(0,0);
            if (page === 'home') renderProducts();
            if (page === 'myProducts') renderMyProducts();
        }

        // PRODUITS
        function publishProduct() {
            const name = document.getElementById('productName').value;
            const price = document.getElementById('productPrice').value;
            if(!name || !price) return alert("Veuillez remplir les informations.");
            const newP = { 
                id: Date.now(), 
                name, 
                category: document.getElementById('productCategory').value, 
                price, 
                image: tempImageBase64, 
                phone: document.getElementById('productPhone').value, 
                seller: currentUser.email, 
                status: 'active' 
            };
            products.push(newP);
            saveData();
            showToast("Annonce publi√©e !");
            showPage('home');
        }

        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            const search = document.getElementById('searchInput').value.toLowerCase();
            const filter = document.getElementById('filterCategory').value;
            const filtered = products.filter(p => p.status === 'active' && p.name.toLowerCase().includes(search) && (filter === "" || p.category === filter));
            
            grid.innerHTML = filtered.length ? filtered.map(p => `
                <div class="product-card">
                    <div class="cat-badge">${p.category.toUpperCase()}</div>
                    <div class="product-image">${p.image ? `<img src="${p.image}">` : 'üì¶'}</div>
                    <div class="product-info">
                        <div class="product-name">${p.name}</div>
                        <div class="product-price">${p.price}‚Ç¨</div>
                        <div class="product-actions">
                            <button class="primary" onclick="openPayment('${p.name}', ${p.price})">Acheter</button>
                            <button class="secondary" onclick="window.open('https://wa.me/${p.phone}')">WhatsApp</button>
                        </div>
                    </div>
                </div>
            `).join('') : '<p style="text-align:center; grid-column: 1/-1;">Aucun produit trouv√©.</p>';
        }

        // GESTION MES ANNONCES
        function renderMyProducts() {
            const list = document.getElementById('myProductsList');
            const my = products.filter(p => p.seller === currentUser.email);
            list.innerHTML = my.length ? my.map(p => `
                <div class="product-card">
                    ${p.status === 'sold' ? '<div class="sold-overlay">VENDU</div>' : ''}
                    <div class="product-image">${p.image ? `<img src="${p.image}">` : 'üì¶'}</div>
                    <div class="product-info">
                        <strong>${p.name}</strong><br>${p.price}‚Ç¨
                        <div class="product-actions" style="margin-top:15px">
                            <button class="secondary" onclick="openEdit(${p.id}, '${p.name.replace(/'/g, "\\'")}', ${p.price})">Modifier</button>
                            ${p.status === 'active' ? `<button class="success" onclick="markAsSold(${p.id})">Marquer Vendu</button>` : ''}
                            <button class="danger" onclick="deleteProd(${p.id})">Supprimer</button>
                        </div>
                    </div>
                </div>
            `).join('') : '<p style="text-align:center; grid-column: 1/-1;">Vous n\'avez aucune annonce.</p>';
        }

        function markAsSold(id) {
            const p = products.find(prod => prod.id === id);
            if(p) { p.status = 'sold'; saveData(); renderMyProducts(); showToast("Marqu√© comme vendu !"); }
        }

        function deleteProd(id) {
            if(confirm("Supprimer cette annonce ?")) {
                products = products.filter(p => p.id !== id);
                saveData(); renderMyProducts();
            }
        }

        function openEdit(id, name, price) {
            document.getElementById('editId').value = id;
            document.getElementById('editName').value = name;
            document.getElementById('editPrice').value = price;
            document.getElementById('editModal').style.display = 'flex';
        }

        function saveEdit() {
            const id = parseInt(document.getElementById('editId').value);
            const p = products.find(prod => prod.id === id);
            if(p) {
                p.name = document.getElementById('editName').value;
                p.price = document.getElementById('editPrice').value;
                saveData(); closeModal('editModal'); renderMyProducts(); showToast("Modifi√© !");
            }
        }

        // PAIEMENT
        function openPayment(n, p) { 
            document.getElementById('paymentDetails').innerText = "Produit : " + n + " | Total : " + p + "‚Ç¨";
            document.getElementById('paymentModal').style.display = 'flex'; 
        }
        function confirmPayment() { 
            if(!document.getElementById('payInfo').value) return alert("Entrez vos coordonn√©es de paiement");
            showToast("Traitement du paiement...");
            setTimeout(() => { alert("Paiement r√©ussi !"); closeModal('paymentModal'); }, 1500);
        }

        // UTILS
        function saveData() { localStorage.setItem('products', JSON.stringify(products)); }
        function closeModal(m) { document.getElementById(m).style.display = 'none'; }
        function handlePreview(e) {
            const reader = new FileReader();
            reader.onload = (f) => tempImageBase64 = f.target.result;
            if(e.target.files[0]) reader.readAsDataURL(e.target.files[0]);
        }
        function showToast(m) { 
            const t = document.createElement('div'); t.className = 'toast'; t.innerText = m; 
            document.body.appendChild(t); setTimeout(()=>t.remove(), 3000); 
        }
    </script>
</body>
</html>